meta {
  name: Succeed
  type: http
  seq: 1
}

post {
  url: {{baseUrl}}/contest/16/participation?invitationCode=123456
  body: none
  auth: none
}

params:query {
  invitationCode: 123456
}

assert {
  res.status: eq 201
}

script:pre-request {
  await require("./login").loginUser(req);
  // TODO: remove participation
}

docs {
  # ğŸ“˜ Participate Contest

  **POST** `/contest/:id/participation`

  Register the authenticated user for a specific contest.

  ì£¼ì–´ì§„ ëŒ€íšŒ IDì— í•´ë‹¹í•˜ëŠ” ëŒ€íšŒì— ì°¸ì—¬í•©ë‹ˆë‹¤.

  ---

  ### ğŸ”’ Authentication

  âœ… Required
  - ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤
  - ì¸ì¦ë˜ì§€ ì•Šì€ ìš”ì²­ì€ 401 Unauthorized ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤

  ---

  ### ğŸ“¥ Request Parameters

  #### Path Parameters

  | Name | Type   | Required | Description |
  |------|--------|----------|-------------|
  | `id` | number | âœ…       | ëŒ€íšŒ ID        |

  #### Query Parameters

  | Name             | Type   | Required | Description                                      |
  |------------------|--------|----------|--------------------------------------------------|
  | `invitationCode` | string | ğŸ”¸       | ì´ˆëŒ€ ì½”ë“œ (ëŒ€íšŒì— `invitationCode`ê°€ ìˆëŠ” ê²½ìš° í•„ìˆ˜) |

  ---

  ### ğŸ“¤ Response Body

  #### Content-Type: `application/json`

  #### Status Code: `201 Created`

  ```json
  {
    "id": 1,
    "contestId": 16,
    "userId": 1,
    "acceptedProblemNum": 0,
    "score": 0,
    "finalScore": 0,
    "lastAcceptedTime": null,
    "totalPenalty": 0,
    "finalTotalPenalty": 0,
    "createTime": "2024-01-01T00:00:00.000Z",
    "updateTime": "2024-01-01T00:00:00.000Z"
  }
  ```

  #### Response Fields

  | Field              | Type    | Description                                    |
  |--------------------|---------|------------------------------------------------|
  | `id`               | number  | ContestRecord ID                                |
  | `contestId`        | number  | ëŒ€íšŒ ID                                          |
  | `userId`            | number  | ì°¸ê°€í•œ ì‚¬ìš©ì ID                                  |
  | `acceptedProblemNum` | number  | í•´ê²°í•œ ë¬¸ì œ ìˆ˜ (ì´ˆê¸°ê°’: 0)                         |
  | `score`             | number  | í˜„ì¬ ì ìˆ˜ (ì´ˆê¸°ê°’: 0)                             |
  | `finalScore`        | number  | ìµœì¢… ì ìˆ˜ (ì´ˆê¸°ê°’: 0)                             |
  | `lastAcceptedTime`  | string  | ë§ˆì§€ë§‰ìœ¼ë¡œ ë¬¸ì œë¥¼ í•´ê²°í•œ ì‹œê°„ (ISO 8601, null ê°€ëŠ¥) |
  | `totalPenalty`      | number  | ì´ í˜ë„í‹° (ì´ˆê¸°ê°’: 0)                             |
  | `finalTotalPenalty` | number  | ìµœì¢… ì´ í˜ë„í‹° (ì´ˆê¸°ê°’: 0)                        |
  | `createTime`        | string  | ì°¸ê°€ ê¸°ë¡ ìƒì„± ì‹œê°„ (ISO 8601)                    |
  | `updateTime`        | string  | ì°¸ê°€ ê¸°ë¡ ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸ ì‹œê°„ (ISO 8601)          |

  ---

  ### ğŸ“ Notes

  - `invitationCode`ê°€ ìˆëŠ” ëŒ€íšŒì˜ ê²½ìš°, ì •í™•í•œ 6ìë¦¬ ì´ˆëŒ€ ì½”ë“œë¥¼ ì „ë‹¬í•´ì•¼ í•©ë‹ˆë‹¤
  - ì°¸ê°€ ì‹ ì²­ ë§ˆê° ì‹œê°„(`registerDueTime`) ì´ì „ì—ë§Œ ì°¸ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
  - ì´ë¯¸ ì°¸ê°€í•œ ëŒ€íšŒì— ë‹¤ì‹œ ì°¸ê°€í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤
  - ì°¸ê°€ ì„±ê³µ ì‹œ `ContestRecord`ì™€ `UserContest` (ì—­í• : `Participant`)ê°€ ìƒì„±ë©ë‹ˆë‹¤

  ---

  ### âš ï¸ Error Cases

  #### [404] Contest does not exist

  ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ëŒ€íšŒ IDì— ì°¸ì—¬í•˜ë ¤ê³  í•  ë•Œ ë°œìƒí•©ë‹ˆë‹¤.

  #### [409] Already participated

  ì´ë¯¸ ì°¸ê°€í•œ ëŒ€íšŒì— ë‹¤ì‹œ ì°¸ê°€í•˜ë ¤ê³  í•  ë•Œ ë°œìƒí•©ë‹ˆë‹¤.

  #### [409] Registration closed

  ì°¸ê°€ ì‹ ì²­ ë§ˆê° ì‹œê°„ì´ ì§€ë‚œ ëŒ€íšŒì— ì°¸ê°€í•˜ë ¤ê³  í•  ë•Œ ë°œìƒí•©ë‹ˆë‹¤.

  #### [409] Invalid Invitation Code

  ì´ˆëŒ€ ì½”ë“œê°€ í•„ìš”í•œ ëŒ€íšŒì— ì˜ëª»ëœ ì´ˆëŒ€ ì½”ë“œë¥¼ ì…ë ¥í–ˆì„ ë•Œ ë°œìƒí•©ë‹ˆë‹¤.
}
