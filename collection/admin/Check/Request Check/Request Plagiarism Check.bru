meta {
  name: Request Plagiarism Check
  type: graphql
  seq: 1
}

post {
  url: {{gqlUrl}}
  body: graphql
  auth: inherit
}

body:graphql {
  mutation CheckAssignmentSubmissions(
    $input: CreatePlagiarismCheckInput!,
    $assignmentId: Int!,
    $problemId: Int!
  ) {
    checkAssignmentSubmissions(
      input: $input,
      assignmentId: $assignmentId,
      problemId: $problemId
    ) {
      id
      problemId
      userId
      language
      checkPreviousSubmission
      enableMerging
      minTokens
      useJplagClustering
      assignmentId
      contestId
      workbookId
      createTime
      result
    }
  }
}

body:graphql:vars {
  {
    "input": {
      "language": "Java",
      "enableMerging": false,
      "minTokens":  2,
      "useJplagClustering": true
    },
    "problemId": 4,
    "assignmentId": 6
  }
}

docs {
  # 📨 Request Check

  Request a plagiarism check for a specific task problem.

  특정 과제의 Problem에 대해 표절 검사를 요청합니다.

  이 API는 아래와 같은 조건에 부합하는 경우 접근할 수 있습니다.

  - 해당 과제의 담당 교수 / 운영진인 경우
  - 과제 dueTime이 지난 경우
  - 2명 이상의 유저가 1개 이상의 submission을 제출한 경우

  Assignment, Problem이 없거나 권한이 없는 경우 및 submission이 1개 이하인 경우 예외를 발생시킵니다.

  ### 📥 Request Parameters

  | Name | Type   | Required | Description              |
  |------|--------|----------|--------------------------|
  | `assignmentId` | number | ✅ | 요청 대상인 과제 아이디 |
  | `problemId` | number | ✅ | 요청 대상인 과제의 문제 아이디 |
  | `language` | Language | ✅ | 표절 검사할 언어 |
  | `minTokens` | number | ❌ | 비교할 최소 토큰 수 |
  | `enableMerging` | boolean | ❌ | 표절 검사 회피를 위한 난독화를 방지 |
  | `useJplagClustering` | boolean | ❌ | 표절이 의심되는 집단을 분석할지 여부 |


  ### 📥 Response Parameters

  | Name | Type   | Description |
  |------|--------|-------------|
  | `id` | number | 요청 아이디 |
  | `problemId` | number | 요청 대상인 과제의 문제 아이디 |
  | `userId` | number | 검사를 요청한 유저 아이디 |
  | `language` | Language | 표절 검사할 언어 |
  | `enableMerging` | boolean | 표절 검사 회피를 위한 난독화를 방지 |
  | `minTokens` | number | 비교할 최소 토큰 수 |
  | `useJplagClustering` | boolean | 표절이 의심되는 집단을 분석할지 여부 |
  | `assignmentId` | number | 요청 대상이 과제인 경우 그 아이디 |
  | `contestId` | number | 요청 대상이 대회인 경우 그 아이디 |
  | `workbookId` | number | 요청 대상이 워크북인 경우 그 아이디 |
  | `createTime` | DateTime | 요청이 생성된 시간 |
  | `result` | CheckResultStatus | 표절 검사 회피를 위한 난독화를 방지 |
}

