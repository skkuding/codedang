meta {
  name: Succeed
  type: graphql
  seq: 1
}

post {
  url: {{gqlUrl}}
  body: graphql
  auth: none
}

body:graphql {
  query GetContestLeaderboard($contestId: Int!) {
    getContestLeaderboard(contestId: $contestId) {
      maxScore
      participatedNum
      registeredNum
      isFrozen
      leaderboard {
        rank
        userId
        username
        finalScore
        finalTotalPenalty
        problemRecords {
          order
          problemId
          score
          penalty
          submissionCount
          isFirstSolver
        }
      }
    }
  }
}

body:graphql:vars {
  {
    "contestId": 20
  }
}

script:pre-request {
  await require("./login").loginContestAdmin(req);
}

docs {
  # ğŸ“˜ Get Contest Leaderboard

  **POST** `/graphql (query: getContestLeaderboard)`

  Retrieves the leaderboard for a specific contest.

  íŠ¹ì • ëŒ€íšŒì˜ ë¦¬ë”ë³´ë“œ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.

  ëŒ€íšŒ ì •ë³´ì™€ í•¨ê»˜ ì°¸ê°€ì ìˆœìœ„ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

  ---

  ### ğŸ”’ Authentication

  âœ… Required (Contest Staff)

  ---

  ### ğŸ“¥ Request Variables

  | Name | Type | Required | Description |
  |---|---|---|---|
  | `contestId` | Int | âœ… | ì¡°íšŒí•  ëŒ€íšŒì˜ ID |

  ---

  ### ğŸ“¤ Response Body

  #### Content-Type: `application:json`

  ```json
  {
    "data": {
      "getContestLeaderboard": {
        "maxScore": 30,
        "participatedNum": 5,
        "registeredNum": 16,
        "isFrozen": false,
        "leaderboard": [
          {
            "rank": 2,
            "userId": 2,
            "username": "admin",
            "finalScore": 0,
            "finalTotalPenalty": 0,
            "problemRecords": [
              {
                "order": 0,
                "problemId": 1,
                "score": 0,
                "penalty": 0,
                "submissionCount": 0,
                "isFirstSolver": false
              }
            ]
          }
        ]
      }
    }
  }
  ```

  | Field | Type | Description |
  |-------|------|-------------|
  | `maxScore` | Int | ëŒ€íšŒì˜ ì´ì  |
  | `participatedNum` | Int | ì œì¶œ ê¸°ë¡ì´ ìˆëŠ” ì°¸ê°€ì ìˆ˜ |
  | `registeredNum` | Int | ëŒ€íšŒ ì´ ì°¸ê°€ì ìˆ˜ |
  | `isFrozen` | Boolean | ë¦¬ë”ë³´ë“œ ë™ê²° ì—¬ë¶€ |
  | `leaderboard` | [Leaderboard] | ì°¸ê°€ì ìˆœìœ„ ëª©ë¡ |
  | `leaderboard.rank` | Int | ì‚¬ìš©ì ìˆœìœ„ |
  | `leaderboard.userId` | Int | ì‚¬ìš©ì ê³ ìœ  ID |
  | `leaderboard.username` | String | ì‚¬ìš©ì ì´ë¦„ |
  | `leaderboard.finalScore` | Int | ìµœì¢… ì ìˆ˜ |
  | `leaderboard.finalTotalPenalty` | Int | ìµœì¢… íŒ¨ë„í‹° |
  | `leaderboard.problemRecords` | [ProblemRecord] | ë¬¸ì œë³„ ì ìˆ˜ ê¸°ë¡ |
}
