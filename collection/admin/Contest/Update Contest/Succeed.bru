meta {
  name: Succeed
  type: graphql
  seq: 1
}

post {
  url: {{gqlUrl}}
  body: graphql
  auth: none
}

body:graphql {
  mutation UpdateContest(
    $contestId: Int!,
    $input: UpdateContestInput!
  ) {
    updateContest(
      contestId: $contestId
      input: $input
    ) {
      id
      title
      description
      startTime
      endTime
      registerDueTime
      unfreeze
      freezeTime
      enableCopyPaste
      isJudgeResultVisible
      invitationCode
      summary
      userContest {
        userId
        role
      }
    }
  }
}

body:graphql:vars {
  {
    "contestId": 19,
    "input": {
      "title": "Updated Contest 2",
      "description": "thisisupdatedcontest",
      "startTime": "2025-01-01",
      "endTime": "2030-01-01",
      "registerDueTime": "2023-01-01",
      "enableCopyPaste": true,
      "isJudgeResultVisible": true,
      "invitationCode": "123456",
      "summary": {
        "ì°¸ì—¬ëŒ€ìƒ": "updatedparticipationTarget",
        "ì§„í–‰ë°©ì‹": "updatedcompetitionMethod",
        "ìˆœìœ„ì‚°ì •": "updatedrankingMethod",
        "ë¬¸ì œí˜•íƒœ": "updatedproblemFormat",
        "ì°¸ì—¬í˜œíƒ": "updatedbenefits"
      }
    }
  }
}

assert {
  res.body.data.updateContest: isDefined
}

script:pre-request {
  await require("./login").loginContestAdmin(req);
}

docs {
  # ğŸ“˜ Update Contest

  **POST** `/graphql (mutation: updateContest)`

  Updates the details of an existing contest.

  ê¸°ì¡´ ëŒ€íšŒì˜ ì •ë³´ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.

  ëŒ€íšŒ ì •ë³´ ì™¸ì— ëŒ€íšŒ ìŠ¤íƒœí”„(`Manager`, `Reviewer`)ë„ ì´ APIë¥¼ í†µí•´ ì¶”ê°€, ìˆ˜ì •, ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  ëŒ€íšŒ ì‹œê°„ì´ ë³€ê²½ë  ê²½ìš°, ì—°ê´€ëœ ë¬¸ì œë“¤ì˜ `visibleLockTime`ë„ í•¨ê»˜ ì¬ê³„ì‚°ë˜ì–´ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.

  ---

  ### ğŸ”’ Authentication

  âœ… Required (Contest Staff)

  ---

  ## ìš”ì²­ í•„ë“œ
  | í•„ë“œëª… | íƒ€ì… | í•„ìˆ˜ ì—¬ë¶€ | ì„¤ëª… |
  |--------|------|----------|------|
  | `id` | Int | âœ… | ì—…ë°ì´íŠ¸í•  ì½˜í…ŒìŠ¤íŠ¸ì˜ ID |
  | `title` | String | âŒ | ëŒ€íšŒ ì œëª© |
  | `description` | String | âŒ | ëŒ€íšŒ ì„¤ëª… |
  | `startTime` | GraphQLISODateTime | âŒ | ëŒ€íšŒ ì‹œì‘ ì‹œê°„ |
  | `endTime` | GraphQLISODateTime | âŒ | ëŒ€íšŒ ì¢…ë£Œ ì‹œê°„ |
  | `registerDueTime` | GraphQLISODateTime | âŒ | ì°¸ê°€ ë“±ë¡ ë§ˆê° ì‹œê°„ |
  | `isJudgeResultVisible` | Boolean | âŒ | ì±„ì  ê²°ê³¼ ê³µê°œ ì—¬ë¶€ |
  | `penalty` | Int | âŒ | ëŒ€íšŒ í˜ë„í‹° ì ìˆ˜ |
  | `lastPenalty` | Boolean | âŒ | ë§ˆì§€ë§‰ íŒ¨ë„í‹° ì ìš© ì—¬ë¶€ |
  | `posterUrl` | String | âŒ | í¬ìŠ¤í„° ì´ë¯¸ì§€ URL |
  | `invitationCode` | String | âŒ | 6ìë¦¬ ì´ˆëŒ€ ì½”ë“œ |
  | `freezeTime`| GraphQLISODateTime | âŒ | ë¦¬ë”ë³´ë“œ ë™ê²° ì‹œì‘ ì‹œê°„ |
  | `enableCopyPaste` | Boolean | âŒ | ë³µì‚¬/ë¶™ì—¬ë„£ê¸° í—ˆìš© ì—¬ë¶€ |
  | `evaluateWithSampleTestcase` | Boolean | âŒ | ì˜ˆì œ í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ë¡œë§Œ ì±„ì  ì—¬ë¶€ |
  | `userContest` | [UserContestInput] | âŒ | ëŒ€íšŒ ê´€ë¦¬ì/ë¦¬ë·°ì–´ ì—­í•  ë¶€ì—¬ |
  | `summary` | GraphQLJSON | âŒ | ëŒ€íšŒ ê´€ë ¨ ìš”ì•½ ì •ë³´ (Key-Value) |

  *`UpdateContestInput`ì˜ ìƒì„¸ í•„ë“œëŠ” `createContest`ì˜ `input`ê³¼ ëŒ€ë¶€ë¶„ ë™ì¼í•©ë‹ˆë‹¤.*

  ---

  ### ğŸ“¤ Response Body

  #### Content-Type: `application/json`

  ```json
  {
    "data": {
      "updateContest": {
        "id": "19",
        "title": "Updated Contest 2",
        "description": "thisisupdatedcontest",
        "startTime": "2025-01-01T00:00:00.000Z",
        "endTime": "2030-01-01T00:00:00.000Z",
        "registerDueTime": "2023-01-01T00:00:00.000Z",
        "unfreeze": false,
        "freezeTime": null,
        "enableCopyPaste": true,
        "isJudgeResultVisible": true,
        "invitationCode": "123456",
        "summary": {
          "ë¬¸ì œí˜•íƒœ": "updatedproblemFormat",
          "ìˆœìœ„ì‚°ì •": "updatedrankingMethod",
          "ì§„í–‰ë°©ì‹": "updatedcompetitionMethod",
          "ì°¸ì—¬ëŒ€ìƒ": "updatedparticipationTarget",
          "ì°¸ì—¬í˜œíƒ": "updatedbenefits"
        },
        "userContest": [
          {
            "userId": 5,
            "role": "Manager"
          },
          {
            "userId": 6,
            "role": "Reviewer"
          }
        ]
      }
    }
  }
  ```
}
