meta {
  name: Succeed
  type: graphql
  seq: 1
}

post {
  url: {{gqlUrl}}
  body: graphql
  auth: none
}

body:graphql {
  mutation CreateContest($input: CreateContestInput!) {
    createContest(input: $input) {
      id
      title
      description
      startTime
      endTime
      registerDueTime
      enableCopyPaste
      isJudgeResultVisible
      invitationCode
      summary
    }
  }
}

body:graphql:vars {
  {
    "input": {
      "title": "New Contest 1",
      "description": "thisisnewcontest",
      "startTime": "2026-01-01",
      "endTime": "2030-01-01",
      "registerDueTime": "2023-12-31",
      "enableCopyPaste": true,
      "isJudgeResultVisible": true,
      "invitationCode": "123456",
      "summary": {
        "ì°¸ì—¬ëŒ€ìƒ": "participationTarget",
        "ì§„í–‰ë°©ì‹": "competitionMethod",
        "ìˆœìœ„ì‚°ì •": "rankingMethod",
        "ë¬¸ì œí˜•íƒœ": "problemFormat",
        "ì°¸ì—¬í˜œíƒ": "benefits"
      },
      "userContest": [
        { "userId": 5, "contestRole": "Manager" },
        { "userId": 6, "contestRole": "Reviewer" }
      ],
      "penalty": 20,
      "lastPenalty": false,
      "posterUrl": null,
      "freezeTime": "2030-01-01T00:00:00.000Z",
      "evaluateWithSampleTestcase": false
    }
  }
}

assert {
  res.body.data.createContest: isDefined
}

script:pre-request {
  await require("./login").loginContestAdmin(req);
}

docs {
  # ğŸ“˜ Create Contest

  **POST** `/graphql (mutation: createContest)`

  Creates a new contest.

  ìƒˆë¡œìš´ ëŒ€íšŒë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

  ëŒ€íšŒ ìƒì„±ì€ `canCreateContest` í•„ë“œê°€ `true`ì¸ ì‚¬ìš©ìë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.

  `userContest` í•„ë“œë¥¼ í†µí•´ ë‹¤ë¥¸ ìœ ì €ì—ê²Œ `Manager` ë˜ëŠ” `Reviewer` ì—­í• ì„ ë¶€ì—¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  ìš”ì²­ìëŠ” ìë™ìœ¼ë¡œ í•´ë‹¹ ëŒ€íšŒì˜ `Admin`ì´ ë©ë‹ˆë‹¤.

  ---

  ### ğŸ”’ Authentication

  âœ… Required

  ---

  ### ğŸ“¥ Request Variables

  #### `input: CreateContestInput`
  | Name | Type | Required | Description |
  |------|------|----------|-------------|
  | `title` | String | âœ… | ëŒ€íšŒ ì œëª© |
  | `description` | String | âŒ | ëŒ€íšŒ ì„¤ëª… |
  | `startTime` | GraphQLISODateTime | âœ… | ëŒ€íšŒ ì‹œì‘ ì‹œê°„ |
  | `endTime` | GraphQLISODateTime | âœ… | ëŒ€íšŒ ì¢…ë£Œ ì‹œê°„ |
  | `registerDueTime` | GraphQLISODateTime | âœ… | ì°¸ê°€ ë“±ë¡ ë§ˆê° ì‹œê°„ |
  | `isJudgeResultVisible` | Boolean | âœ… | ì±„ì  ê²°ê³¼ ê³µê°œ ì—¬ë¶€ |
  | `penalty` | Int | âŒ | ëŒ€íšŒ í˜ë„í‹° ì ìˆ˜ |
  | `lastPenalty` | Boolean | âŒ | ë§ˆì§€ë§‰ íŒ¨ë„í‹° ì ìš© ì—¬ë¶€ |
  | `posterUrl` | String | âŒ | í¬ìŠ¤í„° ì´ë¯¸ì§€ URL |
  | `invitationCode` | String | âŒ | 6ìë¦¬ ì´ˆëŒ€ ì½”ë“œ |
  | `freezeTime`| GraphQLISODateTime | âŒ | ë¦¬ë”ë³´ë“œ ë™ê²° ì‹œì‘ ì‹œê°„ |
  | `enableCopyPaste` | Boolean | âŒ | ë³µì‚¬/ë¶™ì—¬ë„£ê¸° í—ˆìš© ì—¬ë¶€ |
  | `evaluateWithSampleTestcase` | Boolean | âŒ | ì˜ˆì œ í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ë¡œë§Œ ì±„ì  ì—¬ë¶€ |
  | `userContest` | [UserContestInput] | âŒ | ëŒ€íšŒ ê´€ë¦¬ì/ë¦¬ë·°ì–´ ì—­í•  ë¶€ì—¬ |
  | `summary` | GraphQLJSON | âŒ | ëŒ€íšŒ ê´€ë ¨ ìš”ì•½ ì •ë³´ (Key-Value) |

  #### `userContest: UserContestInput`
  | Name | Type | Required | Description |
  |---|---|---|---|
  | `userId` | Int | âœ… | ì—­í• ì„ ë¶€ì—¬í•  ìœ ì €ì˜ ID |
  | `contestRole` | String | âœ… | ë¶€ì—¬í•  ì—­í•  (`Manager` ë˜ëŠ” `Reviewer`) |

  ---

  ### ğŸ“¤ Response Body

  #### Content-Type: `application/json`

  ```json
  {
    "data": {
      "createContest": {
        "id": "21",
        "title": "New Contest 1",
        "description": "thisisnewcontest",
        "startTime": "2026-01-01T00:00:00.000Z",
        "endTime": "2030-01-01T00:00:00.000Z",
        "registerDueTime": "2023-12-31T00:00:00.000Z",
        "enableCopyPaste": true,
        "isJudgeResultVisible": true,
        "invitationCode": "123456",
        "summary": {
          "ë¬¸ì œí˜•íƒœ": "problemFormat",
          "ìˆœìœ„ì‚°ì •": "rankingMethod",
          "ì§„í–‰ë°©ì‹": "competitionMethod",
          "ì°¸ì—¬ëŒ€ìƒ": "participationTarget",
          "ì°¸ì—¬í˜œíƒ": "benefits"
        }
      }
    }
  }
  ```

  | Field | Type | Description |
  |---|---|---|---|
  | `id` | Int | ìƒì„±ëœ ëŒ€íšŒì˜ ê³ ìœ  ID |
  | `title` | String | ëŒ€íšŒ ì œëª© |
  | `description` | String | ëŒ€íšŒ ì„¤ëª… |
  | `startTime` | GraphQLISODateTime | ëŒ€íšŒ ì‹œì‘ ì‹œê°„ |
  | `endTime` | GraphQLISODateTime | ëŒ€íšŒ ì¢…ë£Œ ì‹œê°„ |
  | `registerDueTime` | GraphQLISODateTime | ì°¸ê°€ ë“±ë¡ ë§ˆê° ì‹œê°„ |
  | `enableCopyPaste` | Boolean | ë³µì‚¬/ë¶™ì—¬ë„£ê¸° í—ˆìš© ì—¬ë¶€ |
  | `isJudgeResultVisible` | Boolean | ì±„ì  ê²°ê³¼ ê³µê°œ ì—¬ë¶€ |
  | `invitationCode` | String | 6ìë¦¬ ì´ˆëŒ€ ì½”ë“œ |
  | `summary` | GraphQLJSON | ëŒ€íšŒ ê´€ë ¨ ìš”ì•½ ì •ë³´ (Key-Value) |
}
