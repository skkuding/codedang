meta {
  name: Succeed
  type: graphql
  seq: 1
}

post {
  url: {{gqlUrl}}
  body: graphql
  auth: none
}

body:graphql {
  query GetContestQnAs($contestId: Int!, $take: Int, $cursor: Int, $filter: GetContestQnAsFilterInput) {
    getContestQnAs(
      contestId: $contestId,
      take: $take,
      cursor: $cursor,
      filter: $filter
    ) {
      id
      order
      title
      content
      category
      isResolved
      createTime
      contestId
      createdBy {
        username
      }
      _count {
        comments
      }
    }
  }
}

body:graphql:vars {
  {
    "contestId": 20,
    "take": 10
    // "cursor": 1
  }
}

script:pre-request {
  await require("./login").loginContestAdmin(req);
}

docs {
  # 📘 Get Contest QnAs

  **POST** `/graphql (query: getContestQnAs)`

  Retrieves a paginated list of QnAs for a contest.

  특정 대회의 QnA 목록을 조회합니다.

  `take`와 `cursor`를 통해 가져올 QnA의 개수와 시작점을 지정할 수 있으며, `filter`를 통해 해결 여부(`isResolved`)에 따라 필터링할 수 있습니다.

  ---

  ### 🔒 Authentication

  ✅ Required (Contest Staff)

  ---

  ### 📥 Request Variables

  | Name | Type | Required | Description |
  |---|---|---|---|
  | `contestId` | Int | ✅ | 조회할 QnA가 속한 대회의 ID |
  | `take` | Int | ❌ | 가져올 개수 (기본값: 10) |
  | `cursor` | Int | ❌ | 페이지네이션 커서 (ID) |
  | `filter`| GetContestQnAsFilterInput | ❌ | 필터링 옵션 |
  | `filter.isResolved` | Boolean | ❌ | 해결/미해결 필터링 |

  ---

  ### 📤 Response Body

  #### Content-Type: `application/json`

  ```json
  {
    "data": {
      "getContestQnAs": [
        {
          "id": "7",
          "order": 1,
          "title": "20번 대회에 대한 질문",
          "content": "7번 유저가 작성함",
          "category": "General",
          "isResolved": false,
          "createTime": "2025-09-18T07:18:43.149Z",
          "contestId": 20,
          "createdBy": {
            "username": "user01"
          },
          "_count": {
            "comments": 1
          }
        }
      ]
    }
  }
  ```

  | Field | Type | Description |
  |--------|------|------|
  | `id` | Int | QnA ID |
  | `order` | Int | 대회 내 QnA 순번 |
  | `title` | String | QnA 제목 |
  | `content` | String | QnA 내용 |
  | `category` | QnACategory | QnA 카테고리 |
  | `isResolved` | Boolean | 해결 완료 여부 |
  | `createTime` | GraphQLISODateTime | 생성 시간 |
  | `contestId` | Int | QnA가 속한 대회 ID |
  | `createdBy` | User | 작성자 정보 |
  | `createdBy.username` | String | 작성자 사용자명 |
  | `_count` | Object | 관련 데이터 개수 |
  | `_count.comments` | Int | 해당 QnA에 달린 댓글 개수 |
}
