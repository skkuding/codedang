meta {
  name: Succeed
  type: http
  seq: 1
}

post {
  url: {{baseUrl}}/graphql
  body: json
  auth: none
}

body:json {
  {
    "query": "query GetContestQnAs($contestId: Int!, $filter: GetContestQnAsFilterInput) { getContestQnAs(contestId: $contestId, filter: $filter) { id order title content category isResolved createTime createdBy { username } _count { comments } } }",
    "variables": {
      "contestId": 1,
      "filter": {
        "categories": ["Problem"],
        "problemOrders": [0, 1],
        "orderBy": "asc",
        "isResolved": false
      }
    }
  }
}

script:pre-request {
  await require("./login").loginAdmin(req);
}

docs {
  ## 📘 Get Contest QnAs (Admin)

  **POST** `/graphql`

  Admin 단에서 대회의 QnA들을 조회합니다. 다양한 필터링 옵션을 지원합니다.

  ### 🔒 Authentication

  🔸 Required
  - Admin 권한이 필요합니다
  - `loginAdmin` 스크립트를 통해 인증을 처리합니다

  ### 📥 Request Parameters

  #### GraphQL Query Variables

  | Name      | Type   | Required | Description                      |
  |-----------|--------|----------|----------------------------------|
  | `contestId` | Int   | ✅       | 조회할 대회의 ID                |
  | `filter`    | GetContestQnAsFilterInput | ❌ | 필터링 옵션 (선택사항)        |

  #### Filter Options

  | Name           | Type                    | Description                    |
  |----------------|-------------------------|--------------------------------|
  | `categories`   | QnACategory[]           | QnA 카테고리 필터링 (General, Problem) |
  | `problemOrders`| Int[]                   | 특정 문제들의 order 배열 (Problem 카테고리와 함께 사용) |
  | `orderBy`      | 'asc' \| 'desc'         | 정렬 순서 (기본값: 'asc')      |
  | `isResolved`   | Boolean                 | 해결 상태 필터링 (true: 해결됨, false: 미해결) |

  ### 📤 Response

  ```json
  {
    "data": {
      "getContestQnAs": [
        {
          "id": 1,
          "order": 1,
          "title": "1번 문제 질문",
          "content": "1번 문제에서 시간 초과가 발생합니다",
          "category": "Problem",
          "isResolved": false,
          "createTime": "2024-01-01T00:00:00Z",
          "createdBy": {
            "username": "user123"
          },
          "_count": {
            "comments": 2
          }
        }
      ]
    }
  }
  ```

  ### 💡 사용 예시

  #### 답변해야 할 QnA만 조회
  ```json
  {
    "filter": {
      "isResolved": false
    }
  }
  ```

  #### 특정 문제의 QnA만 조회
  ```json
  {
    "filter": {
      "categories": ["Problem"],
      "problemOrders": [0, 1]
    }
  }
  ```

  #### 일반 질문만 조회
  ```json
  {
    "filter": {
      "categories": ["General"]
    }
  }
  ```
}
